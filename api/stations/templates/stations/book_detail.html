{% extends "base.html" %}
{% load static %}

{% block title %}{{ book.title }} - Radio Reads{% endblock %}

{% block content %}
<div class="container" style="max-width: 720px;">
    {# Back link #}
    <div style="padding-top: 3rem;">
        <a href="{% url 'stations:index' %}" class="back-link">Back to all books</a>
    </div>

    {# Article #}
    <article>
        <div class="article-header" style="padding: 2rem 0; border-bottom: 1px solid var(--border-color);">
            <div class="book-card__category">{{ book.episode.brand.name }}</div>
            <h1 class="book-card__title book-card__title--featured" style="font-size: 2.5rem;">
                {{ book.title }}
            </h1>
            {% if book.author %}
            <div class="book-card__author" style="font-size: 1.125rem;">By {{ book.author }}</div>
            {% endif %}
        </div>

        <div class="article-content" style="padding: 2.5rem 0;">
            {# Featured On #}
            <div class="info-section" style="margin-bottom: 2rem;">
                <div class="info-label" style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.5rem;">
                    Featured On
                </div>
                <div class="info-value" style="font-size: 1rem; color: var(--text-primary); line-height: 1.7;">
                    {{ book.episode.brand.name }}, {{ book.episode.brand.station.name }}
                </div>
            </div>

            {# Episode #}
            <div class="info-section" style="margin-bottom: 2rem;">
                <div class="info-label" style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.5rem;">
                    Episode
                </div>
                <div class="info-value" style="font-size: 1rem; color: var(--text-primary); line-height: 1.7;">
                    <span style="font-style: italic;">{{ book.episode.title }}</span>
                    {% if book.episode.url %}
                    <br><a href="{{ book.episode.url }}" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: underline;">Listen on BBC</a>
                    {% endif %}
                </div>
            </div>

            {# Aired Date #}
            {% if book.episode.aired_at %}
            <div class="info-section" style="margin-bottom: 2rem;">
                <div class="info-label" style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.5rem;">
                    Aired
                </div>
                <div class="info-value" style="font-size: 1rem; color: var(--text-primary); line-height: 1.7;">
                    {{ book.episode.aired_at|date:"F j, Y" }}
                </div>
            </div>
            {% endif %}

            {# Book Description (if available) #}
            {% if book.description %}
            <div class="info-section" style="margin-bottom: 2rem;">
                <div class="info-label" style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.5rem;">
                    About the Book
                </div>
                <div class="info-value" style="font-size: 1rem; color: var(--text-primary); line-height: 1.7;">
                    {{ book.description }}
                </div>
            </div>
            {% endif %}

            {# Episode Description #}
            {% if book.episode.description %}
            <div class="info-section" style="margin-bottom: 2rem;">
                <div class="info-label" style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.5rem;">
                    About the Episode
                </div>
                <div class="info-value" style="font-size: 1rem; color: var(--text-primary); line-height: 1.7;">
                    {{ book.episode.description }}
                </div>
            </div>
            {% endif %}

            {# CTA Section #}
            <div style="background: var(--bg-tertiary); padding: 2rem; margin-top: 3rem; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); border-radius: 4px;">
                <p style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1rem;">
                    Interested in reading this book?
                </p>
                <a href="https://www.google.com/search?q={{ book.title|urlencode }}{% if book.author %}+{{ book.author|urlencode }}{% endif %}+book"
                   class="btn"
                   target="_blank"
                   rel="noopener"
                   style="display: inline-block; background: var(--accent-color); color: var(--bg-primary); padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; transition: opacity 0.2s; font-size: 0.875rem; font-weight: 500; letter-spacing: 0.3px;">
                    Find this book
                </a>
            </div>
        </div>
    </article>
</div>

<style>
    .back-link {
        display: inline-block;
        font-size: 0.875rem;
        color: var(--text-secondary);
        text-decoration: none;
        transition: color 0.2s;
    }

    .back-link:hover {
        color: var(--text-primary);
    }

    .back-link::before {
        content: "‚Üê ";
    }

    .btn:hover {
        opacity: 0.85;
    }
</style>
{% endblock %}
